
<div class="page-container">
  <app-sidebar #sidebarRef class="sidebar"></app-sidebar>
  <main class="main-content" [class.collapsed]="!sidebarRef.isSidebarExpanded">

  <!-- Top Section: Cameras and Activity Log --><div class="top-section-grid">

  <!-- LEFT: Live Camera Feeds Panel --><div class="camera-feeds-panel panel-base">
  <div class="panel-header mb-4">
    <h2 class="panel-title text-cyan-400">Live Camera Feeds</h2>
    <span class="status-badge active-count">
                {{ activeCameras() }} Cameras Active
              </span>
  </div>

  <div class="camera-grid">
    @for (camera of cameraFeeds(); track camera.name) {
      <div class="camera-card" (click)="toggleCameraStatus(camera)">
        <div class="camera-placeholder ">
          <!-- Modern Camera Icon from SVG (MDI: camera) --><svg class="camera-svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2zM4 6v12h16V6H4zm2 3h12v7H6zm2-3c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
        </svg>
        </div>
        <div class="camera-info">
          <p class="name">{{ camera.name }}</p>
          @if (camera.isRecording) {
            <div class="recording-status">
              <span class="dot"></span>
              {{ camera.status }}
            </div>
          }
          @else {
            <div class="idle-status">
              <span class="dot"></span>
              {{camera.status}}
            </div>

          }
        </div>
      </div>
    }
  </div>
</div>

  <!-- RIGHT: Activity Log Column --><div class="activity-log-column">
  <div class="activity-log-panel panel-base">
    <div class="log-header">
      <h2 class="panel-title text-purple-400">Activity Log</h2>
      <span class="text-sm font-medium text-gray-400">Last 24 hours</span>
    </div>

    <div class="log-timeline">
      @for (log of displayActivityLog; track $index) {
        <div class="log-entry" [class.high-priority]="log.priority === 'High'">
          <div class="log-icon-wrapper" [ngClass]="log.type | lowercase">
            <!-- SVG Icons for Activity Log Entries -->@switch (log.type) {
            @case ('Motion') { <svg class="activity-svg-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg> }
            @case ('Door') { <svg class="activity-svg-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 17c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm0-10h-2V5h2v2zm0 4h-2V9h2v2zm-2 4v-2h2v2h-2zM4 12c-1.1 0-2 .9-2 2v2h2v-2h16v2h2v-2c0-1.1-.9-2-2-2H4zm0-6h16v-2H4v2z"/></svg> }
            @case ('Alarm') { <svg class="activity-svg-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/></svg> }
            @case ('System') { <svg class="activity-svg-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg> }
            @case ('Camera') {
              <svg class="activity-svg-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 5h-3.17l-1.84-2H9.01L7.17 5H4a2 2 0 0 0-2 2v11
             a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm-8
             14a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-10a4 4 0 1 0
             0 8 4 4 0 0 0 0-8z"/>
              </svg>
            }
            @case ('Light') { <svg class="activity-svg-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a.995.995 0 0 0-.81.44L3.6 13.9a1 1 0 0 0 .82 1.6H5v3c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3h.58a1 1 0 0 0 .82-1.6L12.81 2.44A.995.995 0 0 0 12 2zM8 17v-3h8v3H8z"/></svg> }
          }
          </div>
          <div class="log-content">
            <p class="log-title">{{ log.title }}</p>
            <p class="log-location">{{ log.location }}</p>
            <p class="log-time">{{ log.time }}</p>
          </div>
          <span class="log-priority" [ngClass]="log.priority | lowercase">{{ log.priority }}</span>
        </div>
      }
    </div>
  </div>
</div>

</div> <!-- End top-section-grid --><!-- Bottom Section: Doors & Windows and Sensors --><div class="bottom-section-grid">

  <!-- LEFT-BOTTOM: Doors & Windows Panel --><div class="doors-windows-panel panel-base">
  <div class="panel-header">
    <h2 class="panel-title">Doors & Windows</h2>
    <span class="status-badge" [class.secured]="allSecured()">
                {{ allSecured() ? 'All Secured' : 'Needs Attention' }}
              </span>
  </div>

  <div class="devices-grid">
    @for (device of doorWindowDevices(); track device.name) {
      <div (click)="toggleDoor(device)" class="device-card" [class.unsecured-status]="device.status === 'open' || device.status === 'unlocked'">
        <div class="flex items-center gap-3">
          <div class="device-icon">{{ device.icon }}</div>
          <div class="device-info">
            <p class="name">{{ device.name }}</p>
            <p class="status">{{ device.status }}</p>
          </div>
        </div>
        <span class="lock-icon" [class.locked]="device.isLocked">
                    {{ device.isLocked ? 'ðŸ”’' : 'ðŸ”“' }}
                  </span>
      </div>
    }
  </div>
</div>

  <!-- RIGHT-BOTTOM: Sensor Categories Panel --><div class="sensor-categories-panel panel-base">
  <div class="panel-header">
    <h2 class="panel-title text-cyan-400">Sensors</h2>
    <span class="status-badge active-count">
                {{ totalActiveSensors() }} Active
              </span>
  </div>

  <div class="categories-list">
    @for (category of sensorCategories(); track category.name) {
      <div class="category-card" [class.inactive]="!category.isActive">
        <p class="category-name">{{ category.name }}</p>
        <div class="category-status">
          <span class="count">{{ category.count }}/{{ category.total }}</span>
          <div class="indicator"
               [class.bg-green-500]="category.isActive"
               [class.bg-red-500]="!category.isActive">
          </div>
        </div>
      </div>
    }
  </div>
</div>

</div> <!-- End bottom-section-grid --></main>
</div>

